import{_ as ne}from"./index-Ca6IhMNi.js";import{_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CZ56-U16.js";import{_ as I,a as U,b as H,c as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-DrZ5an9j.js";import{_ as F}from"./CardContent.vue_vue_type_script_setup_true_lang-CWAvcYt0.js";import{_ as re,a as oe,b as ie,c as de,d as fe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CAN2nvDw.js";import{_ as me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BShFyWBK.js";import{_ as ve}from"./Input.vue_vue_type_script_setup_true_lang-DYtuGAkU.js";import{_ as M,a as z,b as A,c as B,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-P3Nxcyzz.js";import{_ as pe,a as ce,b as X,c as C,d as _e,e as S}from"./TableCell.vue_vue_type_script_setup_true_lang-C79frFS5.js";import{d as W,q as G,g as $,w as s,c,f as j,n as J,b as n,v as ge,t as i,a as t,u as e,T as ye,o,s as xe,k as m,m as K,p as N,h as be,l as V,e as u,F as P,r as L}from"./app-CmTrqmps.js";import{C as $e}from"./circle-check-big-CQdg7qVD.js";import{C as he}from"./circle-alert-CgLJjjM0.js";import{X as we}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-BFspj7_J.js";import{_ as ke}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D_mnxqHy.js";import{P as O}from"./plus-P6RGEnLN.js";import{S as Ce}from"./search-nEmuarqU.js";import{M as Q}from"./mail-BmtclD9M.js";import{E as Se}from"./eye-BUCEgBpF.js";import{S as Ve}from"./square-pen-BfGllhVh.js";import{T as Te}from"./trash-2-CvKw8Jg6.js";import"./Primitive-sfuLFN_S.js";import"./utils-TfETDaq2.js";import"./useForwardExpose-tR5yqFES.js";import"./OptimizedImage.vue_vue_type_script_setup_true_lang-C6M7A6J-.js";import"./VisuallyHidden-RLdob_WU.js";import"./RovingFocusGroup-CCtqAppH.js";import"./check-gZVr0Ks0.js";import"./createLucideIcon-DHLv5KjZ.js";import"./chevron-down-CmDuymYI.js";import"./useFormControl-c1qM1OmQ.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-CX3Q6MXf.js";import"./index-C3cvPsKy.js";const Pe={class:"text-sm font-medium"},Ge=W({__name:"Toast",props:{message:{},type:{default:"success"},show:{type:Boolean}},emits:["close"],setup(r,{emit:h}){const T=r,_=h,g=G(()=>T.type==="success"?"text-green-600":"text-red-600"),y=G(()=>T.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),x=G(()=>T.type==="success"?$e:he);return(b,v)=>(o(),$(ye,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:s(()=>[r.show?(o(),c("div",{key:0,class:J([y.value,"fixed top-4 right-4 z-50 flex items-center gap-3 rounded-lg border p-4 shadow-lg max-w-sm"])},[(o(),$(ge(x.value),{class:J([g.value,"h-5 w-5 flex-shrink-0"])},null,8,["class"])),n("p",Pe,i(r.message),1),n("button",{onClick:v[0]||(v[0]=w=>_("close")),class:"ml-auto rounded-md p-1 hover:bg-black/5 transition-colors"},[t(e(we),{class:"h-4 w-4"})])],2)):j("",!0)]),_:1}))}}),Ee={class:"space-y-6 p-6"},Re={class:"flex items-center justify-between"},Me={class:"grid gap-4 md:grid-cols-5"},ze={class:"relative"},Ae={key:0,class:"py-8 text-center"},Be={class:"flex items-center gap-2"},Ne={class:"flex items-center gap-2"},Le={key:0,class:"h-4 w-4 text-muted-foreground",title:"RSVP status is based on group response"},je={class:"flex items-center justify-end gap-2"},De={key:2,class:"mt-4"},Ie={class:"flex items-center justify-between"},Ue={class:"text-sm text-muted-foreground"},He={class:"flex items-center gap-2"},qe=["innerHTML"],Fe=["innerHTML"],Ct=W({__name:"Index",props:{guests:{},groups:{},filters:{}},setup(r){const h=r,T=xe(),_=m(h.filters.search),g=m(h.filters.status),y=m(h.filters.group_id),x=m(h.filters.per_page),b=m(!1),v=m(null),w=m(""),Y=G(()=>T.props.flash),k=m(!1),E=m(""),R=m("success");K(Y,d=>{d?.success?(E.value=d.success,R.value="success",k.value=!0,setTimeout(()=>{k.value=!1},5e3)):d?.error&&(E.value=d.error,R.value="error",k.value=!0,setTimeout(()=>{k.value=!1},5e3))},{immediate:!0});const Z=()=>{k.value=!1},ee=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Guests",href:"/admin/guests"}];K([_,g,y,x],()=>{N.get("/admin/guests",{search:_.value,status:g.value,group_id:y.value,per_page:x.value},{preserveState:!0,replace:!0})});const te=d=>{confirm("Are you sure you want to delete this guest? This action cannot be undone.")&&N.delete(`/admin/guests/${d}`,{preserveScroll:!0})},D=d=>d?{variant:"default",label:"Group Responded"}:{variant:"secondary",label:"Pending"},se=(d,l)=>{v.value=d,w.value=l,b.value=!0},le=()=>{v.value&&N.post(`/admin/guests/${v.value}/send-rsvp`,{},{preserveScroll:!0,onSuccess:()=>{b.value=!1,v.value=null,w.value=""},onError:()=>{b.value=!1,v.value=null,w.value=""}})},ae=()=>{b.value=!1,v.value=null,w.value=""};return(d,l)=>(o(),c(P,null,[t(e(be),{title:"Guests - Admin"}),t(ke,{breadcrumbs:ee},{default:s(()=>[n("div",Ee,[n("div",Re,[l[7]||(l[7]=n("div",null,[n("h1",{class:"text-3xl font-bold tracking-tight"},"Guests"),n("p",{class:"text-muted-foreground"}," Manage guests for your wedding ")],-1)),t(e(f),{"as-child":""},{default:s(()=>[t(e(V),{href:"/admin/guests/create"},{default:s(()=>[t(e(O),{class:"mr-2 h-4 w-4"}),l[6]||(l[6]=u(" Add Guest ",-1))]),_:1})]),_:1})]),t(e(I),null,{default:s(()=>[t(e(U),null,{default:s(()=>[t(e(H),null,{default:s(()=>[...l[8]||(l[8]=[u("Filters",-1)])]),_:1}),t(e(q),null,{default:s(()=>[...l[9]||(l[9]=[u(" Search and filter guests ",-1)])]),_:1})]),_:1}),t(e(F),null,{default:s(()=>[n("div",Me,[n("div",ze,[t(e(Ce),{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(ve),{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=a=>_.value=a),placeholder:"Search guests...",class:"pl-10"},null,8,["modelValue"])]),t(e(M),{modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=a=>g.value=a)},{default:s(()=>[t(e(z),null,{default:s(()=>[t(e(A),{placeholder:"Filter by status"})]),_:1}),t(e(B),null,{default:s(()=>[t(e(p),{value:"all"},{default:s(()=>[...l[10]||(l[10]=[u("All Status",-1)])]),_:1}),t(e(p),{value:"responded"},{default:s(()=>[...l[11]||(l[11]=[u("Responded",-1)])]),_:1}),t(e(p),{value:"pending"},{default:s(()=>[...l[12]||(l[12]=[u("Pending",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(M),{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=a=>y.value=a)},{default:s(()=>[t(e(z),null,{default:s(()=>[t(e(A),{placeholder:"Filter by group"})]),_:1}),t(e(B),null,{default:s(()=>[t(e(p),{value:"all"},{default:s(()=>[...l[13]||(l[13]=[u("All Groups",-1)])]),_:1}),(o(!0),c(P,null,L(r.groups,a=>(o(),$(e(p),{key:a.id,value:a.id.toString()},{default:s(()=>[u(i(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(M),{modelValue:x.value,"onUpdate:modelValue":l[3]||(l[3]=a=>x.value=a)},{default:s(()=>[t(e(z),null,{default:s(()=>[t(e(A),{placeholder:"Per page"})]),_:1}),t(e(B),null,{default:s(()=>[t(e(p),{value:"10"},{default:s(()=>[...l[14]||(l[14]=[u("10 per page",-1)])]),_:1}),t(e(p),{value:"25"},{default:s(()=>[...l[15]||(l[15]=[u("25 per page",-1)])]),_:1}),t(e(p),{value:"50"},{default:s(()=>[...l[16]||(l[16]=[u("50 per page",-1)])]),_:1}),t(e(p),{value:"100"},{default:s(()=>[...l[17]||(l[17]=[u("100 per page",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(f),{variant:"outline",onClick:l[4]||(l[4]=a=>{_.value="",g.value="",y.value="",x.value="10"})},{default:s(()=>[...l[18]||(l[18]=[u(" Reset Filters ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(I),null,{default:s(()=>[t(e(U),null,{default:s(()=>[t(e(H),null,{default:s(()=>[u("Guests ("+i(r.guests.total)+")",1)]),_:1}),t(e(q),null,{default:s(()=>[u(" Showing "+i(r.guests.from)+" to "+i(r.guests.to)+" of "+i(r.guests.total)+" guests ",1)]),_:1})]),_:1}),t(e(F),null,{default:s(()=>[r.guests.data.length===0?(o(),c("div",Ae,[l[20]||(l[20]=n("p",{class:"text-muted-foreground"},"No guests found",-1)),t(e(f),{class:"mt-4","as-child":""},{default:s(()=>[t(e(V),{href:"/admin/guests/create"},{default:s(()=>[t(e(O),{class:"mr-2 h-4 w-4"}),l[19]||(l[19]=u(" Create your first guest ",-1))]),_:1})]),_:1})])):(o(),$(e(pe),{key:1},{default:s(()=>[t(e(ce),null,{default:s(()=>[t(e(X),null,{default:s(()=>[t(e(C),null,{default:s(()=>[...l[21]||(l[21]=[u("Name",-1)])]),_:1}),t(e(C),null,{default:s(()=>[...l[22]||(l[22]=[u("Email",-1)])]),_:1}),t(e(C),null,{default:s(()=>[...l[23]||(l[23]=[u("Group",-1)])]),_:1}),t(e(C),null,{default:s(()=>[...l[24]||(l[24]=[u("Status",-1)])]),_:1}),t(e(C),null,{default:s(()=>[...l[25]||(l[25]=[u("Created",-1)])]),_:1}),t(e(C),{class:"text-right"},{default:s(()=>[...l[26]||(l[26]=[u("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(_e),null,{default:s(()=>[(o(!0),c(P,null,L(r.guests.data,a=>(o(),$(e(X),{key:a.id},{default:s(()=>[t(e(S),{class:"font-medium"},{default:s(()=>[u(i(a.full_name),1)]),_:2},1024),t(e(S),null,{default:s(()=>[n("div",Be,[t(e(Q),{class:"h-4 w-4 text-muted-foreground"}),u(" "+i(a.email),1)])]),_:2},1024),t(e(S),null,{default:s(()=>[t(e(f),{variant:"ghost",size:"sm","as-child":""},{default:s(()=>[t(e(V),{href:`/admin/groups/${a.group_id}`},{default:s(()=>[u(i(a.group_name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),t(e(S),null,{default:s(()=>[n("div",Ne,[t(e(ne),{variant:D(a.has_rsvp).variant},{default:s(()=>[u(i(D(a.has_rsvp).label),1)]),_:2},1032,["variant"]),a.has_rsvp?(o(),c("div",Le,[...l[27]||(l[27]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"10"}),n("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),n("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)])])):j("",!0)])]),_:2},1024),t(e(S),null,{default:s(()=>[u(i(new Date(a.created_at).toLocaleDateString()),1)]),_:2},1024),t(e(S),{class:"text-right"},{default:s(()=>[n("div",je,[t(e(f),{variant:"ghost",size:"sm","as-child":""},{default:s(()=>[t(e(V),{href:`/admin/guests/${a.id}`},{default:s(()=>[t(e(Se),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),t(e(f),{variant:"ghost",size:"sm","as-child":""},{default:s(()=>[t(e(V),{href:`/admin/guests/${a.id}/edit`},{default:s(()=>[t(e(Ve),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),t(e(f),{variant:"ghost",size:"sm",onClick:ue=>se(a.id,a.full_name),disabled:a.has_rsvp,title:"Send RSVP Email"},{default:s(()=>[t(e(Q),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t(e(f),{variant:"ghost",size:"sm",onClick:ue=>te(a.id),class:"text-destructive hover:text-destructive"},{default:s(()=>[t(e(Te),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),r.guests.last_page>1?(o(),c("div",De,[n("div",Ie,[n("div",Ue," Page "+i(r.guests.current_page)+" of "+i(r.guests.last_page),1),n("div",He,[(o(!0),c(P,null,L(r.guests.links,a=>(o(),$(e(f),{key:a.label,variant:a.active?"default":"outline",disabled:!a.url,size:"sm","as-child":""},{default:s(()=>[a.url?(o(),$(e(V),{key:0,href:a.url},{default:s(()=>[n("div",{innerHTML:a.label},null,8,qe)]),_:2},1032,["href"])):(o(),c("div",{key:1,innerHTML:a.label},null,8,Fe))]),_:2},1032,["variant","disabled"]))),128))])])])):j("",!0)]),_:1})]),_:1}),t(e(re),{open:b.value,"onUpdate:open":l[5]||(l[5]=a=>b.value=a)},{default:s(()=>[t(e(oe),null,{default:s(()=>[t(e(ie),null,{default:s(()=>[t(e(de),null,{default:s(()=>[...l[28]||(l[28]=[u("Send RSVP Invitation",-1)])]),_:1}),t(e(fe),null,{default:s(()=>[u(" Are you sure you want to send an RSVP invitation email to "+i(w.value)+"? ",1)]),_:1})]),_:1}),t(e(me),null,{default:s(()=>[t(e(f),{variant:"outline",onClick:ae},{default:s(()=>[...l[29]||(l[29]=[u(" Cancel ",-1)])]),_:1}),t(e(f),{onClick:le},{default:s(()=>[...l[30]||(l[30]=[u(" Send Email ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(Ge),{message:E.value,type:R.value,show:k.value,onClose:Z},null,8,["message","type","show"])])]),_:1})],64))}});export{Ct as default};
