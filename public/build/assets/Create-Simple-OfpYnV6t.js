import{d as L,k as b,m as T,q as k,g as E,w as y,b as e,D as Y,c as a,o as l,F as j,r as F,n as S,u,t as i,j as U,f as n,a as d,e as _,M as q,p as z}from"./app-CmTrqmps.js";import{_ as P}from"./Input.vue_vue_type_script_setup_true_lang-DYtuGAkU.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-EZ4kdtGv.js";import{C as H,M as O,_ as J,A as X,S as K}from"./Textarea.vue_vue_type_script_setup_true_lang-B5pDivlb.js";import{P as Q}from"./PublicLayout-DWIBoprH.js";import{C as V}from"./circle-check-big-CQdg7qVD.js";import{C as Z}from"./circle-alert-CgLJjjM0.js";import{P as ee}from"./plus-P6RGEnLN.js";import{A as te}from"./arrow-left-C5moARK0.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-TfETDaq2.js";import"./useForwardExpose-tR5yqFES.js";import"./Primitive-sfuLFN_S.js";import"./createLucideIcon-DHLv5KjZ.js";const le={class:"relative z-10 container px-4 py-8 sm:py-10 lg:py-12"},ae={class:"mx-auto max-w-4xl"},oe={class:"progress-container mb-8 sm:mb-10 lg:mb-12"},ne={class:"progress-bar"},re={class:"progress-steps"},ie=["onClick"],ue={class:"progress-dot"},de={key:1,class:"text-xs sm:text-sm"},me={class:"progress-label text-xs sm:text-sm"},ge={class:"card border border-gray-200 bg-white p-6 shadow-lg sm:p-8"},ce={key:0,class:"space-y-6"},ve={class:"space-y-4"},pe={key:0,class:"mt-1 text-sm font-medium text-red-600"},fe={key:0,class:"flex items-center justify-center py-4"},be={key:1,class:"rounded-lg border-2 border-green-500 bg-green-50 p-4"},_e={class:"flex items-start"},ye={class:"mt-1 text-sm text-green-700"},xe={key:0,class:"mt-2"},he={class:"ml-2 list-inside list-disc text-sm text-green-700"},we={key:1,class:"mt-2 rounded border border-yellow-300 bg-yellow-100 p-2"},ke={class:"text-sm font-medium text-yellow-800"},Se={key:2,class:"rounded-lg border-2 border-red-200 bg-red-50 p-4"},Pe={class:"flex items-start"},Ve={key:1,class:"space-y-6"},Ce={key:0,class:"mb-6 rounded-lg border-2 border-gray-300 bg-gray-50 p-4"},Ae={class:"font-semibold"},Ee={class:"text-sm"},je={class:"space-y-4"},Fe={class:"mt-4 flex items-center justify-center space-x-4 sm:space-x-6"},Re=["disabled"],We={class:"w-16 text-center text-2xl font-bold sm:w-20 sm:text-3xl"},Me=["disabled"],Ne={class:"mt-4 text-center text-base sm:text-lg"},Ge={key:2,class:"space-y-6"},Be={class:"space-y-4"},$e={class:"mt-1 text-sm"},De={key:3,class:"space-y-6"},Ie={class:"space-y-4"},Le={class:"mt-1 text-sm"},Te={key:4,class:"space-y-6"},Ye={class:"space-y-4"},Ue={key:0,class:"mt-1 text-sm font-medium text-red-600"},qe={key:5,class:"space-y-6"},ze={class:"space-y-6 rounded-lg border-2 border-gray-200 bg-gray-50 p-6"},He={class:"mt-2 text-lg"},Oe={key:0,class:"mt-1 text-sm"},Je={class:"mt-2 text-lg"},Xe={key:0,class:"divider"},Ke={key:1},Qe={class:"mt-2 text-lg whitespace-pre-wrap"},Ze={key:2,class:"divider"},et={key:3},tt={class:"mt-2 text-lg"},st={class:"mt-2 text-lg"},lt={class:"rounded-lg border-2 border-green-500 bg-green-50 p-4"},at={class:"flex items-start"},ot={class:"mt-6 flex flex-col justify-between gap-4 sm:mt-8 sm:flex-row sm:gap-0"},nt=["disabled"],rt=["disabled"],it=["disabled"],ut={key:0,class:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-white"},dt=L({__name:"Create-Simple",setup(mt){const C=[{title:"Find Invitation"},{title:"Attendance"},{title:"Message"},{title:"Song"},{title:"Email"},{title:"Review"}],r=b(0),x=b(!1),f=b(!1),v=b(!1),o=b(null),m=b({}),s=b({guest_name:"",attending_count:0,message:"",song_suggestion:"",email:""});T(()=>s.value.guest_name,()=>{s.value.guest_name===""&&(v.value=!1,o.value=null,m.value.guest_name="")});const w=k(()=>{switch(r.value){case 0:return v.value&&o.value&&!o.value.group?.has_rsvp;case 1:return!0;case 2:return!0;case 3:return!0;case 4:return s.value.email&&M(s.value.email);case 5:return!0;default:return!1}}),A=k(()=>w.value&&v.value&&o.value),R=k(()=>(r.value+1)/C.length*100),W=g=>{g<=r.value&&(r.value=g)},M=g=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g),N=async()=>{if(!s.value.guest_name.trim()){m.value.guest_name="Please enter your full name";return}x.value=!0,m.value.guest_name="";try{const g=await q.post("/rsvp/check-guest",{name:s.value.guest_name});g.data.found?(v.value=!0,o.value=g.data,g.data.group?.has_rsvp&&(m.value.guest_name="This group has already submitted an RSVP. Please contact couple if you need to make changes.")):(v.value=!1,o.value=null,m.value.guest_name=g.data.message||"Guest not found")}catch(g){console.error("Error checking guest:",g),m.value.guest_name="An error occurred while checking your name. Please try again.",v.value=!1,o.value=null}finally{x.value=!1}},G=()=>{const g=o.value?.group?.max_attendees||0;s.value.attending_count<g&&s.value.attending_count++},B=()=>{s.value.attending_count>0&&s.value.attending_count--},$=()=>{w.value&&r.value++},D=()=>{r.value>0&&r.value--},I=()=>{if(!A.value)return;f.value=!0,m.value={};const g={group_name:o.value?.group?.name,guest_names:o.value?.group_guests||[s.value.guest_name],email:s.value.email,attending_count:s.value.attending_count,message:s.value.message,song_suggestion:s.value.song_suggestion};z.post("/rsvp/store",g,{onSuccess:()=>{},onError:t=>{typeof t=="object"&&t!==null&&(m.value=Object.fromEntries(Object.entries(t).map(([c,p])=>[c,String(p)]))),r.value=0},onFinish:()=>{f.value=!1}})};return(g,t)=>(l(),E(Q,{title:"RSVP - Wedding Invitation",description:"Please fill out this form to let us know if you can attend our special day",showHeader:!1,showFooter:!1},{default:y(()=>[e("div",le,[e("div",ae,[t[31]||(t[31]=e("div",{class:"header mb-8 text-center sm:mb-10 lg:mb-12"},[e("h3",{class:"title text-3xl font-bold sm:text-4xl"}," James & Dannica's Wedding "),e("div",{class:"divider mt-4 mb-3 sm:mt-6 sm:mb-4"}),e("p",{class:"subtitle mt-2 text-lg sm:text-xl"}," We're so excited to celebrate with you! "),e("p",{class:"mt-2 text-base sm:text-lg"}," Please fill out this form to let us know if you can attend our special day. ")],-1)),e("div",oe,[e("div",ne,[e("div",{class:"progress-fill",style:Y({width:R.value+"%"})},null,4)]),e("div",re,[(l(),a(j,null,F(C,(c,p)=>e("div",{key:p,class:S(["progress-step",{active:r.value===p,completed:r.value>p}]),onClick:gt=>W(p)},[e("div",ue,[r.value>p?(l(),E(u(V),{key:0,class:"h-3 w-3 sm:h-4 sm:w-4"})):(l(),a("span",de,i(p+1),1))]),e("span",me,i(c.title),1)],10,ie)),64))])]),e("div",ge,[e("form",{onSubmit:U(I,["prevent"])},[r.value===0?(l(),a("div",ce,[t[10]||(t[10]=e("div",null,[e("h3",{class:"text-2xl font-bold"}," Find Your Invitation "),e("div",{class:"divider mt-4"}),e("p",{class:"mt-4 text-lg"}," Please enter your full name as it appears on your invitation. ")],-1)),e("div",ve,[e("div",null,[d(u(h),{for:"guest_name",class:"font-semibold"},{default:y(()=>[...t[4]||(t[4]=[_(" Full Name ",-1)])]),_:1}),d(u(P),{id:"guest_name",modelValue:s.value.guest_name,"onUpdate:modelValue":t[0]||(t[0]=c=>s.value.guest_name=c),type:"text",placeholder:"Enter your full name",disabled:x.value,onBlur:N,required:"",class:S(["mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-gray-500 focus:outline-none",{"border-red-500":m.value.guest_name,"border-green-500":v.value&&!m.value.guest_name}])},null,8,["modelValue","disabled","class"]),m.value.guest_name?(l(),a("p",pe,i(m.value.guest_name),1)):n("",!0)]),x.value?(l(),a("div",fe,[...t[5]||(t[5]=[e("div",{class:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-800"},null,-1),e("span",{class:"ml-2 font-medium"},"Searching for your invitation...",-1)])])):n("",!0),v.value&&o.value?(l(),a("div",be,[e("div",_e,[d(u(V),{class:"mt-0.5 mr-2 h-5 w-5 text-green-600"}),e("div",null,[t[8]||(t[8]=e("h3",{class:"font-semibold text-green-900"}," Invitation Found! ",-1)),e("p",ye," Group: "+i(o.value.group?.name),1),o.value.group_guests&&o.value.group_guests.length>0?(l(),a("div",xe,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-green-700"}," Guests in your group: ",-1)),e("ul",he,[(l(!0),a(j,null,F(o.value.group_guests,c=>(l(),a("li",{key:c},i(c),1))),128))])])):n("",!0),o.value.group?.has_rsvp?(l(),a("div",we,[e("p",ke,[d(u(Z),{class:"mr-1 inline h-4 w-4"}),t[7]||(t[7]=_(" This group has already submitted an RSVP. Please contact the couple if you need to make changes. ",-1))])])):n("",!0)])])])):n("",!0),!v.value&&s.value.guest_name&&!x.value?(l(),a("div",Se,[e("div",Pe,[d(u(H),{class:"mt-0.5 mr-2 h-5 w-5 text-red-600"}),t[9]||(t[9]=e("div",null,[e("h3",{class:"font-semibold text-red-900"}," Invitation Not Found "),e("p",{class:"mt-1 text-sm text-red-700"}," We couldn't find your invitation. Please check the spelling of your name or contact the couple for assistance. ")],-1))])])):n("",!0)])])):n("",!0),r.value===1?(l(),a("div",Ve,[t[12]||(t[12]=e("div",null,[e("h3",{class:"text-2xl font-bold"}," Will You Be Attending? "),e("div",{class:"divider mt-4"}),e("p",{class:"mt-4 text-lg"}," Let us know how many people from your group will be attending the wedding. ")],-1)),o.value?(l(),a("div",Ce,[e("p",Ae," Group: "+i(o.value.group?.name),1),e("p",Ee," Maximum attendees: "+i(o.value.group?.max_attendees),1)])):n("",!0),e("div",je,[e("div",null,[d(u(h),{for:"attending_count",class:"font-semibold"},{default:y(()=>[...t[11]||(t[11]=[_(" Number of Attendees ",-1)])]),_:1}),e("div",Fe,[e("button",{type:"button",class:"rounded-full bg-gray-200 p-3 transition-colors hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400",onClick:B,disabled:s.value.attending_count<=0},[d(u(O),{class:"h-4 w-4 sm:h-5 sm:w-5"})],8,Re),e("div",We,i(s.value.attending_count),1),e("button",{type:"button",class:"rounded-full bg-gray-200 p-3 transition-colors hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400",onClick:G,disabled:s.value.attending_count>=(o.value?.group?.max_attendees||0)},[d(u(ee),{class:"h-4 w-4 sm:h-5 sm:w-5"})],8,Me)]),e("p",Ne,i(s.value.attending_count===0?"We're sorry you can't make it. We'll miss you!":`Great! We're excited to celebrate with ${s.value.attending_count} ${s.value.attending_count===1?"person":"people"}.`),1)])])])):n("",!0),r.value===2?(l(),a("div",Ge,[t[14]||(t[14]=e("div",null,[e("h3",{class:"text-2xl font-bold"}," Message to the Couple "),e("div",{class:"divider mt-4"}),e("p",{class:"mt-4 text-lg"}," Share a special message or well wishes with us (optional). ")],-1)),e("div",Be,[e("div",null,[d(u(h),{for:"message",class:"font-semibold"},{default:y(()=>[...t[13]||(t[13]=[_(" Your Message ",-1)])]),_:1}),d(u(J),{id:"message",modelValue:s.value.message,"onUpdate:modelValue":t[1]||(t[1]=c=>s.value.message=c),placeholder:"Write your message here...",rows:"5",maxlength:"1000",class:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-gray-500 focus:outline-none"},null,8,["modelValue"]),e("p",$e,i(s.value.message?.length||0)+"/1000 characters ",1)])])])):n("",!0),r.value===3?(l(),a("div",De,[t[16]||(t[16]=e("div",null,[e("h3",{class:"text-2xl font-bold"}," Song Suggestion "),e("div",{class:"divider mt-4"}),e("p",{class:"mt-4 text-lg"}," Help us create the perfect playlist! Suggest a song that would make you want to dance (optional). ")],-1)),e("div",Ie,[e("div",null,[d(u(h),{for:"song_suggestion",class:"font-semibold"},{default:y(()=>[...t[15]||(t[15]=[_(" Song Title & Artist ",-1)])]),_:1}),d(u(P),{id:"song_suggestion",modelValue:s.value.song_suggestion,"onUpdate:modelValue":t[2]||(t[2]=c=>s.value.song_suggestion=c),type:"text",placeholder:"e.g., 'Perfect - Ed Sheeran'",maxlength:"255",class:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-gray-500 focus:outline-none"},null,8,["modelValue"]),e("p",Le,i(s.value.song_suggestion?.length||0)+"/255 characters ",1)])])])):n("",!0),r.value===4?(l(),a("div",Te,[t[19]||(t[19]=e("div",null,[e("h3",{class:"text-2xl font-bold"}," Email Address "),e("div",{class:"divider mt-4"}),e("p",{class:"mt-4 text-lg"}," Provide your email address for confirmation and updates about the wedding. ")],-1)),e("div",Ye,[e("div",null,[d(u(h),{for:"email",class:"font-semibold"},{default:y(()=>[...t[17]||(t[17]=[_(" Email Address ",-1)])]),_:1}),d(u(P),{id:"email",modelValue:s.value.email,"onUpdate:modelValue":t[3]||(t[3]=c=>s.value.email=c),type:"email",placeholder:"your.email@example.com",required:"",class:S(["mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-gray-500 focus:outline-none",{"border-red-500":m.value.email,"border-green-500":s.value.email&&!m.value.email}])},null,8,["modelValue","class"]),m.value.email?(l(),a("p",Ue,i(m.value.email),1)):n("",!0),t[18]||(t[18]=e("p",{class:"mt-1 text-sm"}," We'll use this to send you a confirmation and any important updates. ",-1))])])])):n("",!0),r.value===5?(l(),a("div",qe,[t[28]||(t[28]=e("div",null,[e("h3",{class:"text-2xl font-bold"}," Review Your RSVP "),e("div",{class:"divider mt-4"}),e("p",{class:"mt-4 text-lg"}," Please review your information before submitting. ")],-1)),e("div",ze,[e("div",null,[t[20]||(t[20]=e("h3",{class:"text-xl font-semibold"}," Guest Information ",-1)),e("p",He,i(s.value.guest_name),1),o.value?(l(),a("p",Oe," Group: "+i(o.value.group?.name),1)):n("",!0)]),t[25]||(t[25]=e("div",{class:"divider"},null,-1)),e("div",null,[t[21]||(t[21]=e("h3",{class:"text-xl font-semibold"}," Attendance ",-1)),e("p",Je,i(s.value.attending_count)+" "+i(s.value.attending_count===1?"person":"people")+" attending ",1)]),s.value.message?(l(),a("div",Xe)):n("",!0),s.value.message?(l(),a("div",Ke,[t[22]||(t[22]=e("h3",{class:"text-xl font-semibold"}," Message ",-1)),e("p",Qe,i(s.value.message),1)])):n("",!0),s.value.song_suggestion?(l(),a("div",Ze)):n("",!0),s.value.song_suggestion?(l(),a("div",et,[t[23]||(t[23]=e("h3",{class:"text-xl font-semibold"}," Song Suggestion ",-1)),e("p",tt,i(s.value.song_suggestion),1)])):n("",!0),t[26]||(t[26]=e("div",{class:"divider"},null,-1)),e("div",null,[t[24]||(t[24]=e("h3",{class:"text-xl font-semibold"},"Email",-1)),e("p",st,i(s.value.email),1)])]),e("div",lt,[e("div",at,[d(u(V),{class:"mt-0.5 mr-2 h-5 w-5 text-green-600"}),t[27]||(t[27]=e("div",null,[e("h3",{class:"font-semibold text-green-900"}," Ready to Submit "),e("p",{class:"mt-1 text-sm text-green-700"}," Click the submit button below to complete your RSVP. You'll receive a confirmation email shortly. ")],-1))])])])):n("",!0),e("div",ot,[e("button",{type:"button",class:"order-2 flex items-center justify-center rounded-lg bg-gray-200 px-4 py-2 transition-colors hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 sm:order-1",onClick:D,disabled:r.value===0||f.value},[d(u(te),{class:"mr-2 h-4 w-4"}),t[29]||(t[29]=e("span",{class:"text-sm sm:text-base"},"Previous",-1))],8,nt),r.value<5?(l(),a("button",{key:0,type:"button",class:"order-1 flex items-center justify-center rounded-lg bg-gray-800 px-4 py-2 text-white transition-colors hover:bg-gray-700 disabled:bg-gray-300 disabled:text-gray-500 sm:order-2",onClick:$,disabled:!w.value||f.value},[t[30]||(t[30]=e("span",{class:"text-sm sm:text-base"},"Next",-1)),d(u(X),{class:"ml-2 h-4 w-4"})],8,rt)):n("",!0),r.value===5?(l(),a("button",{key:1,type:"submit",class:"order-1 flex items-center justify-center rounded-lg bg-gray-800 px-4 py-2 text-white transition-colors hover:bg-gray-700 disabled:bg-gray-300 disabled:text-gray-500 sm:order-2",disabled:f.value||!A.value},[f.value?(l(),a("div",ut)):n("",!0),_(" "+i(f.value?"Submitting...":"Submit RSVP")+" ",1),d(u(K),{class:"ml-2 h-4 w-4"})],8,it)):n("",!0)])],32)])])])]),_:1}))}}),Ct=se(dt,[["__scopeId","data-v-3b779b3d"]]);export{Ct as default};
