import{_ as _e}from"./index-CB1HrkmB.js";import{_ as d}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-wHfDipdV.js";import{_ as H,a as q,b as F,c as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-9NeNNvwC.js";import{_ as X}from"./CardContent.vue_vue_type_script_setup_true_lang-C7UbJe0y.js";import{_ as J,a as K,b as Q,c as W,d as Y}from"./DialogTitle.vue_vue_type_script_setup_true_lang-75ZLBrpQ.js";import{_ as Z}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CO5he_1T.js";import{_ as ge}from"./Input.vue_vue_type_script_setup_true_lang-D08R7A46.js";import{_ as z,a as A,b as B,c as N,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-jVQUt6sN.js";import{_ as ye,a as xe,b as ee,c as V,d as be,e as T}from"./TableCell.vue_vue_type_script_setup_true_lang-CcC0npTh.js";import{d as ue,q as E,g as k,w as l,c,f as j,n as te,b as n,v as $e,t as i,a as t,u as e,T as we,o as r,s as ke,k as f,m as le,p as L,h as Ce,l as G,e as u,F as D,r as U}from"./app-uTeBNO3m.js";import{C as Se}from"./circle-check-big-33iMUG5b.js";import{C as he}from"./circle-alert-dT9gjyYD.js";import{X as Ve}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-BlxWJr8v.js";import{_ as Te}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D5tsK41R.js";import{P as se}from"./plus-CMbI4tQ3.js";import{S as Ge}from"./search-uDNur78_.js";import{M as ae}from"./mail-EyW5J1E4.js";import{E as Pe}from"./eye-Df37qVJ4.js";import{S as De}from"./square-pen-C6tQNrUo.js";import{T as Ee}from"./trash-2-C30l2D39.js";import"./Primitive-D6Zf--NW.js";import"./utils-TfETDaq2.js";import"./useForwardExpose-Pf2dAzcd.js";import"./OptimizedImage.vue_vue_type_script_setup_true_lang-DtAT0ND3.js";import"./VisuallyHidden-BnzVpQGT.js";import"./RovingFocusGroup-CCqaQDp9.js";import"./check-CbEAhJz5.js";import"./createLucideIcon-CwYfYG3s.js";import"./chevron-down-DFi_30sg.js";import"./useFormControl-htUjkfed.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-tRkDTNlQ.js";import"./index-opWzLI44.js";const Me={class:"text-sm font-medium"},Re=ue({__name:"Toast",props:{message:{},type:{default:"success"},show:{type:Boolean}},emits:["close"],setup(o,{emit:_}){const P=o,g=_,y=E(()=>P.type==="success"?"text-green-600":"text-red-600"),x=E(()=>P.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),b=E(()=>P.type==="success"?Se:he);return($,v)=>(r(),k(we,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:l(()=>[o.show?(r(),c("div",{key:0,class:te([x.value,"fixed top-4 right-4 z-50 flex items-center gap-3 rounded-lg border p-4 shadow-lg max-w-sm"])},[(r(),k($e(b.value),{class:te([y.value,"h-5 w-5 flex-shrink-0"])},null,8,["class"])),n("p",Me,i(o.message),1),n("button",{onClick:v[0]||(v[0]=C=>g("close")),class:"ml-auto rounded-md p-1 hover:bg-black/5 transition-colors"},[t(e(Ve),{class:"h-4 w-4"})])],2)):j("",!0)]),_:1}))}}),ze={class:"space-y-6 p-6"},Ae={class:"flex items-center justify-between"},Be={class:"grid gap-4 md:grid-cols-5"},Ne={class:"relative"},Le={key:0,class:"py-8 text-center"},Ue={class:"flex items-center gap-2"},je={class:"flex items-center gap-2"},Ie={key:0,class:"h-4 w-4 text-muted-foreground",title:"RSVP status is based on group response"},He={class:"flex items-center justify-end gap-2"},qe={key:2,class:"mt-4"},Fe={class:"flex items-center justify-between"},Oe={class:"text-sm text-muted-foreground"},Xe={class:"flex items-center gap-2"},Je=["innerHTML"],Ke=["innerHTML"],Gt=ue({__name:"Index",props:{guests:{},groups:{},filters:{}},setup(o){const _=o,P=ke(),g=f(_.filters.search),y=f(_.filters.status),x=f(_.filters.group_id),b=f(_.filters.per_page),$=f(!1),v=f(null),C=f(""),S=f(!1),w=f(null),ne=E(()=>P.props.flash),h=f(!1),M=f(""),R=f("success");le(ne,m=>{m?.success?(M.value=m.success,R.value="success",h.value=!0,setTimeout(()=>{h.value=!1},5e3)):m?.error&&(M.value=m.error,R.value="error",h.value=!0,setTimeout(()=>{h.value=!1},5e3))},{immediate:!0});const oe=()=>{h.value=!1},re=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Guests",href:"/admin/guests"}];le([g,y,x,b],()=>{L.get("/admin/guests",{search:g.value,status:y.value,group_id:x.value,per_page:b.value},{preserveState:!0,replace:!0})});const ie=m=>{const s=_.guests.data.find(a=>a.id===m);s&&(w.value=s,S.value=!0)},de=()=>{w.value&&L.delete(`/admin/guests/${w.value.id}/delete`,{preserveScroll:!0,onSuccess:()=>{S.value=!1,w.value=null},onError:()=>{S.value=!1,w.value=null}})},fe=()=>{S.value=!1,w.value=null},I=m=>m?{variant:"default",label:"Group Responded"}:{variant:"secondary",label:"Pending"},me=(m,s)=>{v.value=m,C.value=s,$.value=!0},ve=()=>{v.value&&L.post(`/admin/guests/${v.value}/send-rsvp`,{},{preserveScroll:!0,onSuccess:()=>{$.value=!1,v.value=null,C.value=""},onError:()=>{$.value=!1,v.value=null,C.value=""}})},pe=()=>{$.value=!1,v.value=null,C.value=""};return(m,s)=>(r(),c(D,null,[t(e(Ce),{title:"Guests - Admin"}),t(Te,{breadcrumbs:re},{default:l(()=>[n("div",ze,[n("div",Ae,[s[8]||(s[8]=n("div",null,[n("h1",{class:"text-3xl font-bold tracking-tight"},"Guests"),n("p",{class:"text-muted-foreground"}," Manage guests for your wedding ")],-1)),t(e(d),{"as-child":""},{default:l(()=>[t(e(G),{href:"/admin/guests/create"},{default:l(()=>[t(e(se),{class:"mr-2 h-4 w-4"}),s[7]||(s[7]=u(" Add Guest ",-1))]),_:1})]),_:1})]),t(e(H),null,{default:l(()=>[t(e(q),null,{default:l(()=>[t(e(F),null,{default:l(()=>[...s[9]||(s[9]=[u("Filters",-1)])]),_:1}),t(e(O),null,{default:l(()=>[...s[10]||(s[10]=[u(" Search and filter guests ",-1)])]),_:1})]),_:1}),t(e(X),null,{default:l(()=>[n("div",Be,[n("div",Ne,[t(e(Ge),{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(ge),{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=a=>g.value=a),placeholder:"Search guests...",class:"pl-10"},null,8,["modelValue"])]),t(e(z),{modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=a=>y.value=a)},{default:l(()=>[t(e(A),null,{default:l(()=>[t(e(B),{placeholder:"Filter by status"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(p),{value:"all"},{default:l(()=>[...s[11]||(s[11]=[u("All Status",-1)])]),_:1}),t(e(p),{value:"responded"},{default:l(()=>[...s[12]||(s[12]=[u("Responded",-1)])]),_:1}),t(e(p),{value:"pending"},{default:l(()=>[...s[13]||(s[13]=[u("Pending",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(z),{modelValue:x.value,"onUpdate:modelValue":s[2]||(s[2]=a=>x.value=a)},{default:l(()=>[t(e(A),null,{default:l(()=>[t(e(B),{placeholder:"Filter by group"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(p),{value:"all"},{default:l(()=>[...s[14]||(s[14]=[u("All Groups",-1)])]),_:1}),(r(!0),c(D,null,U(o.groups,a=>(r(),k(e(p),{key:a.id,value:a.id.toString()},{default:l(()=>[u(i(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(e(z),{modelValue:b.value,"onUpdate:modelValue":s[3]||(s[3]=a=>b.value=a)},{default:l(()=>[t(e(A),null,{default:l(()=>[t(e(B),{placeholder:"Per page"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(p),{value:"10"},{default:l(()=>[...s[15]||(s[15]=[u("10 per page",-1)])]),_:1}),t(e(p),{value:"25"},{default:l(()=>[...s[16]||(s[16]=[u("25 per page",-1)])]),_:1}),t(e(p),{value:"50"},{default:l(()=>[...s[17]||(s[17]=[u("50 per page",-1)])]),_:1}),t(e(p),{value:"100"},{default:l(()=>[...s[18]||(s[18]=[u("100 per page",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(d),{variant:"outline",onClick:s[4]||(s[4]=a=>{g.value="",y.value="",x.value="",b.value="10"})},{default:l(()=>[...s[19]||(s[19]=[u(" Reset Filters ",-1)])]),_:1})])]),_:1})]),_:1}),t(e(H),null,{default:l(()=>[t(e(q),null,{default:l(()=>[t(e(F),null,{default:l(()=>[u("Guests ("+i(o.guests.total)+")",1)]),_:1}),t(e(O),null,{default:l(()=>[u(" Showing "+i(o.guests.from)+" to "+i(o.guests.to)+" of "+i(o.guests.total)+" guests ",1)]),_:1})]),_:1}),t(e(X),null,{default:l(()=>[o.guests.data.length===0?(r(),c("div",Le,[s[21]||(s[21]=n("p",{class:"text-muted-foreground"},"No guests found",-1)),t(e(d),{class:"mt-4","as-child":""},{default:l(()=>[t(e(G),{href:"/admin/guests/create"},{default:l(()=>[t(e(se),{class:"mr-2 h-4 w-4"}),s[20]||(s[20]=u(" Create your first guest ",-1))]),_:1})]),_:1})])):(r(),k(e(ye),{key:1},{default:l(()=>[t(e(xe),null,{default:l(()=>[t(e(ee),null,{default:l(()=>[t(e(V),null,{default:l(()=>[...s[22]||(s[22]=[u("Name",-1)])]),_:1}),t(e(V),null,{default:l(()=>[...s[23]||(s[23]=[u("Email",-1)])]),_:1}),t(e(V),null,{default:l(()=>[...s[24]||(s[24]=[u("Group",-1)])]),_:1}),t(e(V),null,{default:l(()=>[...s[25]||(s[25]=[u("Status",-1)])]),_:1}),t(e(V),null,{default:l(()=>[...s[26]||(s[26]=[u("Created",-1)])]),_:1}),t(e(V),{class:"text-right"},{default:l(()=>[...s[27]||(s[27]=[u("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(be),null,{default:l(()=>[(r(!0),c(D,null,U(o.guests.data,a=>(r(),k(e(ee),{key:a.id},{default:l(()=>[t(e(T),{class:"font-medium"},{default:l(()=>[u(i(a.full_name),1)]),_:2},1024),t(e(T),null,{default:l(()=>[n("div",Ue,[t(e(ae),{class:"h-4 w-4 text-muted-foreground"}),u(" "+i(a.email),1)])]),_:2},1024),t(e(T),null,{default:l(()=>[t(e(d),{variant:"ghost",size:"sm","as-child":""},{default:l(()=>[t(e(G),{href:`/admin/groups/${a.group_id}`},{default:l(()=>[u(i(a.group_name),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024),t(e(T),null,{default:l(()=>[n("div",je,[t(e(_e),{variant:I(a.has_rsvp).variant},{default:l(()=>[u(i(I(a.has_rsvp).label),1)]),_:2},1032,["variant"]),a.has_rsvp?(r(),c("div",Ie,[...s[28]||(s[28]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"10"}),n("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),n("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)])])):j("",!0)])]),_:2},1024),t(e(T),null,{default:l(()=>[u(i(new Date(a.created_at).toLocaleDateString()),1)]),_:2},1024),t(e(T),{class:"text-right"},{default:l(()=>[n("div",He,[t(e(d),{variant:"ghost",size:"sm","as-child":""},{default:l(()=>[t(e(G),{href:`/admin/guests/${a.id}`},{default:l(()=>[t(e(Pe),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),t(e(d),{variant:"ghost",size:"sm","as-child":""},{default:l(()=>[t(e(G),{href:`/admin/guests/${a.id}/edit`},{default:l(()=>[t(e(De),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),t(e(d),{variant:"ghost",size:"sm",onClick:ce=>me(a.id,a.full_name),disabled:a.has_rsvp,title:"Send RSVP Email"},{default:l(()=>[t(e(ae),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t(e(d),{variant:"ghost",size:"sm",onClick:ce=>ie(a.id),class:"text-destructive hover:text-destructive"},{default:l(()=>[t(e(Ee),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),o.guests.last_page>1?(r(),c("div",qe,[n("div",Fe,[n("div",Oe," Page "+i(o.guests.current_page)+" of "+i(o.guests.last_page),1),n("div",Xe,[(r(!0),c(D,null,U(o.guests.links,a=>(r(),k(e(d),{key:a.label,variant:a.active?"default":"outline",disabled:!a.url,size:"sm","as-child":""},{default:l(()=>[a.url?(r(),k(e(G),{key:0,href:a.url},{default:l(()=>[n("div",{innerHTML:a.label},null,8,Je)]),_:2},1032,["href"])):(r(),c("div",{key:1,innerHTML:a.label},null,8,Ke))]),_:2},1032,["variant","disabled"]))),128))])])])):j("",!0)]),_:1})]),_:1}),t(e(J),{open:$.value,"onUpdate:open":s[5]||(s[5]=a=>$.value=a)},{default:l(()=>[t(e(K),null,{default:l(()=>[t(e(Q),null,{default:l(()=>[t(e(W),null,{default:l(()=>[...s[29]||(s[29]=[u("Send RSVP Invitation",-1)])]),_:1}),t(e(Y),null,{default:l(()=>[u(" Are you sure you want to send an RSVP invitation email to "+i(C.value)+"? ",1)]),_:1})]),_:1}),t(e(Z),null,{default:l(()=>[t(e(d),{variant:"outline",onClick:pe},{default:l(()=>[...s[30]||(s[30]=[u(" Cancel ",-1)])]),_:1}),t(e(d),{onClick:ve},{default:l(()=>[...s[31]||(s[31]=[u(" Send Email ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(J),{open:S.value,"onUpdate:open":s[6]||(s[6]=a=>S.value=a)},{default:l(()=>[t(e(K),null,{default:l(()=>[t(e(Q),null,{default:l(()=>[t(e(W),null,{default:l(()=>[...s[32]||(s[32]=[u("Delete Guest",-1)])]),_:1}),t(e(Y),null,{default:l(()=>[u(' Are you sure you want to delete guest "'+i(w.value?.full_name)+'"? This action cannot be undone. ',1)]),_:1})]),_:1}),t(e(Z),null,{default:l(()=>[t(e(d),{variant:"secondary",onClick:fe},{default:l(()=>[...s[33]||(s[33]=[u(" Cancel ",-1)])]),_:1}),t(e(d),{variant:"destructive",onClick:de},{default:l(()=>[...s[34]||(s[34]=[u(" Delete Guest ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(Re),{message:M.value,type:R.value,show:h.value,onClose:oe},null,8,["message","type","show"])])]),_:1})],64))}});export{Gt as default};
